<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">
        <head>
            <meta content=\"text/html; charset=UTF-8\" http-equiv=\"content-type\">
            <title>Profile</title><style type="text/css">
            h1 {
                font-size: 14pt;
                margin-left: 15px;
                margin-right: 15px;
                text-align: center;
                font-family: Helvetica, Verdana, Geneva, Arial, sans-serif;
            }
            h2 {
                font-size: 12pt;
                margin-left: 15px;
                margin-right: 15px;
                text-align: center;
                font-family: Helvetica, Verdana, Geneva, Arial, sans-serif;
            }
            p, ol, ul {
                font-size: 12pt;
                font-family: Helvetica, Verdana, Geneva, Arial, sans-serif;
                margin-left: 15px;
                margin-right: 15px;
            }
            caption {
                font-family: Helvetica, Verdana, Geneva, Arial, sans-serif;
                font-size: 12pt;
                margin-left: 15px;
                margin-right: 15px;
            }
            table {
                font-size: 12pt;
                font-family: Helvetica, Verdana, Geneva, Arial, sans-serif;
                font-family: arial, sans-serif;
                border-collapse: collapse;
                align: center;
            }
            td, th {
                border: 1px solid #222222;
                text-align: centre;
                padding: 8px;
            }
            tr:nth-child(even) {
                background-color: #dddddd;
            }
            tr:hover {
                background-color: lightyellow;
            }
            .bareTd {
                border: 0px solid #222222;
                text-align: centre;
                padding: 8px;
            }
            .bareTr:nth-child(even) {
                background-color: white;
            }
            .bareTr:hover {
                background-color: white;
            }
            .numberCell {
                text-align: right;
            }
            .header {
                font-weight: bold;
                text-align: center;
            }
        </style></head>
        <body>
            <h1>Profile</h1><p><strong>Input Surface</strong>: dem_interpolated_contour<br></p><div id='graph' align="center">
    <script>
      var plot = {
        dataX: [[49.88628611021348, 99.77257222042697, 149.65885833064044, 199.54514444085393, 249.43143055106742, 299.3177166612809, 349.20400277149434, 399.0902888817078, 448.97657499192127, 498.86286110213473, 548.7491472123482, 598.6354333225618, 648.5217194327753, 698.4080055429888, 748.2942916532023, 798.1805777634158, 848.0668638736294, 897.9531499838429, 947.8394360940564, 997.7257222042699, 1047.6120083144833, 1097.4982944246967, 1147.3845805349101, 1197.2708666451235, 1247.157152755337, 1297.0434388655503, 1346.9297249757637, 1396.8160110859772, 1446.7022971961906, 1496.588583306404, 1546.4748694166174, 1596.3611555268308, 1646.2474416370442, 1696.1337277472576, 1746.020013857471, 1795.9062999676844, 1845.7925860778978, 1895.6788721881112, 1945.5651582983246, 1995.451444408538, 2045.3377305187514, 2095.224016628965, 2145.110302739178, 2194.9965888493916, 2244.882874959605, 2294.7691610698184, 2344.655447180032, 2394.5417332902452, 2444.4280194004587, 2494.314305510672, 2544.2005916208855, 2594.086877731099, 2643.9731638413123, 2693.8594499515257, 2743.745736061739, 2793.6320221719525, 2843.518308282166, 2893.4045943923793, 2943.2908805025927, 2993.177166612806, 3043.0634527230195, 3092.949738833233, 3142.8360249434463, 3192.7223110536597, 3242.608597163873, 3292.4948832740865, 3342.3811693843, 3392.2674554945133, 3442.1537416047267, 3492.04002771494, 3541.9263138251536, 3591.812599935367, 3641.6988860455804, 3691.5851721557938, 3741.471458266007, 3791.3577443762206, 3841.244030486434, 3891.1303165966474, 3941.016602706861, 3990.902888817074, 4040.7891749272876, 4090.675461037501, 4140.561747147714, 4190.448033257928, 4240.334319368141, 4290.220605478355, 4340.106891588568, 4389.993177698781, 4439.879463808995, 4489.765749919208, 4539.652036029422, 4589.538322139635, 4639.4246082498485, 4689.310894360062, 4739.197180470275, 4789.083466580489, 4838.969752690702, 4888.8560388009155, 4938.742324911129, 4988.628611021342, 5038.514897131556, 5088.401183241769, 5138.2874693519825, 5188.173755462196, 5238.060041572409, 5287.946327682623, 5337.832613792836, 5387.7188999030495, 5437.605186013263, 5487.491472123476, 5537.37775823369, 5587.264044343903, 5637.150330454117, 5687.03661656433, 5736.922902674543, 5786.809188784757, 5836.69547489497, 5886.581761005184, 5936.468047115397, 5986.35433322561, 6036.240619335824, 6086.126905446037, 6136.013191556251, 6185.899477666464, 6235.785763776677, 6285.672049886891, 6335.558335997104, 6385.444622107318, 6435.330908217531, 6485.217194327744, 6535.103480437958, 6584.989766548171, 6634.876052658385, 6684.762338768598, 6734.6486248788115, 6784.534910989025, 6834.421197099238, 6884.307483209452, 6934.193769319665, 6984.0800554298785, 7033.966341540092, 7083.852627650305, 7133.738913760519, 7183.625199870732, 7233.5114859809455, 7283.397772091159, 7333.284058201372, 7383.170344311586, 7433.056630421799, 7482.9429165320125, 7532.829202642226, 7582.715488752439, 7632.601774862653, 7682.488060972866, 7732.37434708308, 7782.260633193293, 7832.146919303506, 7882.03320541372, 7931.919491523933, 7981.805777634147, 8031.69206374436, 8081.578349854573, 8131.464635964787, 8181.350922075, 8231.237208185214, 8281.123494295427, 8331.00978040564, 8380.896066515854, 8430.782352626067, 8480.66863873628, 8530.554924846494, 8580.441210956707, 8630.32749706692, 8680.213783177134, 8730.100069287348, 8779.986355397561, 8829.872641507774, 8879.758927617988, 8929.645213728201, 8979.531499838415, 9029.417785948628, 9079.304072058841, 9129.190358169055, 9179.076644279268, 9228.962930389482, 9278.849216499695, 9328.735502609909, 9378.621788720122, 9428.508074830335, 9478.394360940549, 9528.280647050762, 9578.166933160976, 9628.053219271189, 9677.939505381402, 9727.825791491616, 9777.71207760183, 9827.598363712043, 9877.484649822256, 9927.37093593247, 9977.257222042683, 10027.143508152896, 10077.02979426311, 10126.916080373323, 10176.802366483536, 10226.68865259375, 10276.574938703963, 10326.461224814177, 10376.34751092439, 10426.233797034603, 10476.120083144817, 10526.00636925503, 10575.892655365244, 10625.778941475457, 10675.66522758567, 10725.551513695884, 10775.437799806097, 10825.32408591631, 10875.210372026524, 10925.096658136737, 10974.98294424695, 11024.869230357164, 11074.755516467378, 11124.641802577591, 11174.528088687804, 11224.414374798018, 11274.300660908231, 11324.186947018445, 11374.073233128658, 11423.959519238872, 11473.845805349085, 11523.732091459298, 11573.618377569512, 11623.504663679725, 11673.390949789939, 11723.277235900152, 11773.163522010365, 11823.049808120579, 11872.936094230792, 11922.822380341006, 11972.708666451219, 12022.594952561432, 12072.481238671646, 12122.36752478186, 12172.253810892073, 12222.140097002286, 12272.0263831125, 12321.912669222713, 12371.798955332926, 12421.68524144314, 12471.571527553353, 12521.457813663566, 12571.34409977378, 12621.230385883993, 12671.116671994207, 12721.00295810442, 12770.889244214633, 12820.775530324847, 12870.66181643506, 12920.548102545274, 12970.434388655487, 13020.3206747657, 13070.206960875914, 13120.093246986127, 13169.97953309634, 13219.865819206554, 13269.752105316767, 13319.63839142698, 13369.524677537194, 13419.410963647408, 13469.297249757621, 13519.183535867835, 13569.069821978048, 13618.956108088261, 13668.842394198475, 13718.728680308688, 13768.614966418902, 13818.501252529115, 13868.387538639328, 13918.273824749542, 13968.160110859755, 14018.046396969969, 14067.932683080182, 14117.818969190395, 14167.705255300609, 14217.591541410822, 14267.477827521036, 14317.364113631249, 14367.250399741462, 14417.136685851676, 14467.02297196189, 14516.909258072103, 14566.795544182316, 14616.68183029253, 14666.568116402743, 14716.454402512956, 14766.34068862317, 14816.226974733383, 14866.113260843596, 14915.99954695381, 14965.885833064023, 15015.772119174237, 15065.65840528445, 15115.544691394663, 15165.430977504877, 15215.31726361509, 15265.203549725304, 15315.089835835517, 15364.97612194573, 15414.862408055944, 15464.748694166157, 15514.63498027637, 15564.521266386584, 15614.407552496798, 15664.293838607011, 15714.180124717224, 15764.066410827438, 15813.952696937651, 15863.838983047865, 15913.725269158078, 15963.611555268291, 16013.497841378505, 16063.384127488718, 16113.270413598932, 16163.156699709145, 16213.042985819358, 16262.929271929572, 16312.815558039785, 16362.701844149999, 16412.588130260214, 16462.474416370427, 16512.36070248064, 16562.246988590854, 16612.133274701067, 16662.01956081128, 16711.905846921494, 16761.792133031708, 16811.67841914192, 16861.564705252134, 16911.450991362348, 16961.33727747256, 17011.223563582775, 17061.109849692988, 17110.9961358032, 17160.882421913415, 17210.76870802363, 17260.65499413384, 17310.541280244055, 17360.42756635427, 17410.313852464482, 17460.200138574695, 17510.08642468491, 17559.972710795122, 17609.858996905336, 17659.74528301555]],
        dataY: [[1550.0, 1570.0, 1568.4615478515625, 1569.4444580078125, 1550.769287109375, 1540.0, 1540.0, 1530.0, 1510.0, 1494.754150390625, 1484.754150390625, 1475.5555419921875, 1467.792236328125, 1475.5555419921875, 1471.4285888671875, 1490.0, 1510.0, 1510.0, 1530.0, 1530.0, 1540.0, 1531.5384521484375, 1550.0, 1550.0, 1560.0, 1550.0, 1570.0, 1561.5384521484375, 1561.5384521484375, 1548.4615478515625, 1535.0, 1510.0, 1520.0, 1510.0, 1490.0, 1475.0, 1465.0, 1453.0, 1446.0, 1446.0, 1446.0, 1446.0, 1446.0, 1453.0, 1465.0, 1468.5714111328125, 1481.4285888671875, 1510.0, 1530.0, 1550.0, 1585.0, 1620.0, 1630.0, 1670.0, 1715.0, 1750.0, 1800.0, 1835.0, 1840.0, 1880.0, 1925.0, 1960.0, 1975.0, 1940.0, 1910.0, 1910.0, 1885.0, 1880.0, 1855.0, 1855.0, 1820.0, 1770.0, 1770.0, 1720.0, 1695.0, 1655.0, 1630.0, 1610.0, 1610.0, 1595.0, 1584.754150390625, 1574.754150390625, 1560.302978515625, 1552.7059326171875, 1540.3492431640625, 1540.3492431640625, 1533.1016845703125, 1530.6688232421875, 1523.8582763671875, 1526.6805419921875, 1535.0, 1535.0, 1545.0, 1555.0, 1570.0, 1590.0, 1610.0, 1630.0, 1630.0, 1660.0, 1685.0, 1725.0, 1760.0, 1810.0, 1810.0, 1865.0, 1905.0, 1970.0, 1991.5384521484375, 1980.0, 1955.0, 1930.0, 1880.0, 1855.0, 1821.5384521484375, 1811.5384521484375, 1798.9774169921875, 1798.9774169921875, 1795.67041015625, 1798.5303955078125, 1800.302978515625, 1810.0, 1811.5384521484375, 1830.0, 1828.4615478515625, 1840.0, 1840.0, 1847.195068359375, 1844.242431640625, 1839.76318359375, 1841.3636474609375, 1835.0, 1834.1466064453125, 1827.898681640625, 1835.0081787109375, 1850.0, 1870.0, 1865.0, 1895.0, 1915.0, 1950.0, 1960.0, 1990.0, 2010.0, 2010.0, 2030.0, 2045.0, 2080.0, 2100.0, 2110.0, 2091.53857421875, 2101.53857421875, 2091.53857421875, 2101.53857421875, 2101.53857421875, 2118.46142578125, 2118.46142578125, 2118.46142578125, 2118.46142578125, 2130.0, 2130.0, 2131.53857421875, 2150.0, 2140.0, 2158.46142578125, 2167.6923828125, 2164.615478515625, 2130.0, 2080.0, 2035.0, 2035.0, 2000.0, 1945.0, 1920.0, 1875.0, 1835.0, 1835.0, 1800.0, 1775.0, 1740.0, 1720.0, 1670.0, 1620.0, 1620.0, 1600.0, 1560.0, 1520.0, 1480.0, 1440.0, 1440.0, 1410.0, 1390.0, 1370.0, 1350.0, 1334.754150390625, 1320.302978515625, 1320.302978515625, 1307.6136474609375, 1305.2174072265625, 1300.5361328125, 1310.0, 1310.0, 1321.5384521484375, 1308.4615478515625, 1320.0, 1321.5384521484375, 1330.0, 1331.5384521484375, 1350.0, 1341.5384521484375, 1350.0, 1365.0, 1365.0, 1380.0, 1370.0, 1380.0, 1361.5384521484375, 1371.5384521484375, 1368.4615478515625, 1380.0, 1370.0, 1380.0, 1361.5384521484375, 1371.5384521484375, 1368.4615478515625, 1361.5384521484375, 1371.5384521484375, 1368.4615478515625, 1371.5384521484375, 1360.0, 1370.0, 1368.4615478515625, 1378.4615478515625, 1378.4615478515625, 1391.5384521484375, 1390.0, 1405.0, 1408.5714111328125, 1411.5384521484375, 1408.4615478515625, 1418.4615478515625, 1411.5384521484375, 1398.4615478515625, 1411.5384521484375, 1418.4615478515625, 1431.5384521484375, 1410.0, 1430.0, 1390.0, 1410.0, 1365.0, 1371.5384521484375, 1371.5384521484375, 1385.0, 1390.0, 1390.0, 1395.0, 1360.0, 1380.0, 1380.0, 1400.0, 1405.0, 1405.0, 1390.0, 1390.0, 1375.3846435546875, 1388.4615478515625, 1350.0, 1350.0, 1305.0, 1330.0, 1315.0, 1340.0, 1300.0, 1280.0, 1280.0, 1250.0, 1250.0, 1235.0, 1240.0, 1210.0, 1210.0, 1200.0, 1208.4615478515625, 1190.0, 1190.769287109375, 1179.4736328125, 1175.245849609375, 1165.245849609375, 1165.0, 1151.4285888671875, 1131.5384521484375, 1130.0, 1110.0, 1110.0, 1090.0, 1090.0, 1075.0, 1075.0, 1064.754150390625, 1060.0, 1048.5714111328125, 1045.245849609375, 1035.0, 1035.0, 1025.176513671875, 1019.0, 1019.0, 1005.2459106445313, 1004.7540893554688, 993.4615478515625, 990.0, 980.05712890625, 977.5387573242188, 971.7560424804688, 970.2523193359375, 963.3511962890625, 963.8951416015625, 960.0, 960.0, 960.0, 960.0, 959.9485473632813, 958.022705078125, 953.6883544921875, 946.7135620117188, 940.8333129882813, 946.6666870117188, 940.6060791015625, 943.125, 940.2512817382813, 940.2964477539063, 940.0, 940.0, 940.0, 939.753173828125, 937.69580078125, 936.8053588867188, 939.857421875, 934.9048461914063, 940.0, 935.0, 935.0, 930.0, 929.3465576171875, 924.2003784179688, 922.0861206054688, 922.0861206054688, 920.3516235351563, 919.200927734375, 920.1666870117188, 916.264404296875, 917.97314453125, 917.97314453125]],
        seriesLabels: ["Profile 1"],
        xAxisLabel: "Distance",
        yAxisLabel: "Elevation",
        width: 700,
        height: 500,
        drawPoints: false,
        drawGridlines: true,
        drawLegend: false,
        drawGreyBackground: false,
        parentId: "graph"
      };
      function update(svg) {
        // which of the series labels is longest?
        var maxSeriesLabelLength = 0;
        var a;
        for (a = 0; a < plot.seriesLabels.length; a++) {
          var sl = plot.seriesLabels[a];
          if (sl.length > maxSeriesLabelLength) { maxSeriesLabelLength = sl.length; }
        }
        var plotLeftMargin = 70.0;
        var plotRightMargin = plot.drawLegend ? 65.0 + maxSeriesLabelLength * 7 : 50.0;
        var plotBottomMargin = 70.0;
        var plotTopMargin = 40.0;
        var plotWidth = plot.width - plotLeftMargin - plotRightMargin;
        var plotHeight = plot.height - plotBottomMargin - plotTopMargin;
        var originX = plotLeftMargin;
        var originY = plotTopMargin + plotHeight;
        var tickLen = 8.0;
        var minorTickLen = tickLen * 0.65;

        // If there are no series labels, treat it as one series.
        if (plot.seriesLabels.length === 0) {
					plot.drawLegend = false;
				}

        // colors
        var lineColor = '#47a3ff'; //'#377eb8'; // '#729ece'; // '#1f77b4'; //'#47a3ff'; //'rgb(2,145,205)';
        var highlightColor = '#ff7f00';
        var btnColor = 'rgb(170,170,170)';
        var btnHoverColor = 'rgb(150,150,150)';
        var plotBackgroundColor = 'rgb(255,255,255)';
        if (plot.drawGreyBackground) {
          plotBackgroundColor = '#CCC';
        }
        var chartBackgroundColor = 'white';
        // var gridLineColor = 'rgb(120,120,120)';
        // if (plot.drawGreyBackground) {
          var gridLineColor = '#EEE';
        // }
        var trendlineColor = 'DimGray';
        if (plot.drawGreyBackground) {
          trendlineColor = 'DimGray';
        }
        var showValueClr = "black";
        // if (plot.drawGreyBackground) {
        //   showValueClr = '#FFF';
        // }

        // Gridlines
        // var gridlineDash = '1, 5';
        // if (plot.drawGreyBackground) {
          var gridlineDash = 'none';
        // }

        var tableau20 = [[31, 119, 180], [255, 127, 14],
             [44, 160, 44], [214, 39, 40],
             [148, 103, 189], [140, 86, 75],
             [227, 119, 194], [127, 127, 127],
             [188, 189, 34], [23, 190, 207]];

        var regularOpacity = 1.0;
        var deselectedOpacity = 0.10;


        // create the svg element
        var svgns = "http://www.w3.org/2000/svg";
        if (svg == null) {
          svg = document.createElementNS(svgns, "svg");
        } else {
          while (svg.lastChild) {
              svg.removeChild(svg.lastChild);
          }
        }
        svg.setAttribute('width', `${plot.width}`);
        svg.setAttribute('height', `${plot.height}`);
        var div = document.getElementById(plot.parentId);
        if (div != null) {
          div.appendChild(svg);
        } else {
          // add it to the body of the document
          document.querySelector("body").appendChild(svg);
        }

        // how many series are there?
        var numSeries = plot.dataY.length;

        // if dataX is empty, fill it with the series 1, 2, 3, 4, ...
        if (plot.dataX.length == 0) {
          for (s = 0; s < numSeries; s++) {
            var seriesXData = [];
            for (a = 0; a < plot.dataY[s].length; a++) {
              seriesXData.push(a + 1);
            }
            plot.dataX.push(seriesXData);
          }
        }

        // style
        var style = document.createElement("style");
        let styleString = `
        text {
          font-family:Sans,Arial;
        }
        .axisLabel {
          font-weight: normal;
        }
        .xTickLabel {
          fill: black;
          font-size: 85%;
          font-weight: lighter;
        }
        .yTickLabel {
          fill: black;
          font-size: 85%;
          font-weight: lighter;
        }
        .gridLine {
          stroke: ${gridLineColor};
          stroke-dasharray: ${gridlineDash};
          stroke-width: 0.8;
        }
        .tick {
          stroke: black;
          stroke-width: 0.5;
        }
        #plotBorder {
          fill: none;
          stroke: black;
          stroke-width: 0.5;
        }
        #showValue {
          font-size: 85%;
          fill: ${showValueClr};
        }
        #context-menu {
          position:absolute;
          display:none;
        }
        #context-menu ul {
          list-style:none;
          margin:0;
          padding:0;
          background: #EFEFEF;
          opacity: 0.90;
        }
        #context-menu {
          border:solid 1px #CCC;
        }
        #context-menu li {
          font-family:Sans,Arial;
          font-size: 75%;
          text-align: left;
          color:#000;
          display:block;
          padding:5px 15px;
          border-bottom:solid 1px #CCC;
        }
        #context-menu li:last-child {
          border:none;
        }
        #context-menu li:hover {
          background:#007AFF;
          color:#FFF;
        }
        `;

        var dataPointHoverWidth = 4.0;
        if (!plot.drawPoints) {
          dataPointHoverWidth = 6.0;
        }
        var s;
        for (s = 0; s < numSeries; s++) {
          var clrNum = s % tableau20.length;
          if (plot.seriesLabels.length === 0) {
            // If there are no series labels, treat it as one series.
						clrNum = 0;
					}
          let clr = `rgb(${tableau20[clrNum][0]},${tableau20[clrNum][1]},${tableau20[clrNum][2]})`;

          styleString += `
          .seriesLine${s} {
            fill: none;
            stroke-width:1;
            stroke: ${clr};
            opacity: ${regularOpacity};
          }
          .seriesLine${s}:hover {
            fill: none;
            stroke-width:2;
            stroke: ${clr};
            opacity: ${regularOpacity};
          }
          .seriesLineThick${s} {
            fill: none;
            stroke-width:2;
            stroke: ${clr};
            opacity: ${regularOpacity};
          }
          .seriesLineThick${s}:hover {
            fill: none;
            stroke-width:3;
            stroke: ${clr};
            opacity: ${regularOpacity};
          }
          .dataPoint${s} {
            fill: ${clr};
            stroke-width:0;
            stroke: ${clr};
            opacity: ${regularOpacity};
          }
          .dataPoint${s}:hover {
            fill: red;
            stroke-width:${dataPointHoverWidth};
            stroke: red;
            opacity:1.0;
          }
          `;
        }
        style.innerHTML = styleString;
        svg.appendChild(style);
        svg.id = "plotSvg";

        // background
        var background = document.createElementNS(svgns, "rect");
        background.setAttribute('width', plot.width);
        background.setAttribute('height', plot.height);
        background.style.fill = chartBackgroundColor;
        svg.appendChild(background);

        // translate the origin point
        var g = document.createElementNS(svgns, "g");
        g.setAttribute('id', 'transform');
        g.setAttribute('transform', `translate(${originX},${originY})`);
        svg.appendChild(g);

        // plot background
        var plotBackground = document.createElementNS(svgns, "rect");
        plotBackground.setAttribute('id', 'plotBackground');
        plotBackground.setAttribute('x', 0.0);
        plotBackground.setAttribute('y', -plotHeight);
        plotBackground.setAttribute('width', plotWidth);
        plotBackground.setAttribute('height', plotHeight);
        plotBackground.style.fill = plotBackgroundColor;
        plotBackground.style.stroke = "none";
        g.appendChild(plotBackground);

        // what are the min/max values?
        var xMin = Infinity;
        var xMax = -Infinity;
        var yMin = Infinity;
        var yMax = -Infinity;
        var val = 0;
        var maxNumPoints = 0;
        var totalNumPoints = 0;
        for (s = 0; s < numSeries; s++) {
          var numPoints = Math.min(plot.dataX[s].length, plot.dataY[s].length);
          if (numPoints > maxNumPoints) { maxNumPoints = maxNumPoints; }
          totalNumPoints += numPoints;
          if (numPoints < 2) {
            alert("Too few points for line graph");
            return;
          }
          if (plot.dataX[s].length != plot.dataY[s].length) {
            alert("The x and y data arrays are unequal in length.");
          }
          for (a = 0; a < numPoints; a++) {
              val = plot.dataX[s][a];
              if (val < xMin) { xMin = val; }
              if (val > xMax) { xMax = val; }
              val = plot.dataY[s][a];
              if (val < yMin) { yMin = val; }
              if (val > yMax) { yMax = val; }
          }
        }

        // We don't want a data point to fall on the plot border
        xMin -= 0.0000001;
        yMin -= 0.0000001;
        xMax += 0.0000001;
        yMax += 0.0000001;

        // X axis
        var xAxisTickSpacing = 0.0000001;
        var xAxisNumTicks = 1000;
        var xRange = xMax - xMin;
        a = 0;
        while (xAxisNumTicks > 20) {
          if (a % 2 == 0) {
            xAxisTickSpacing *= 5.0;
          } else {
            xAxisTickSpacing *= 2.0;
          }
          a++;
          xAxisNumTicks = Math.ceil(xRange / xAxisTickSpacing);
        }
        xMin = Math.floor(xMin / xAxisTickSpacing) * xAxisTickSpacing;
        xAxisNumTicks = Math.ceil((xMax - xMin) / xAxisTickSpacing);
        xRange = xAxisTickSpacing * xAxisNumTicks;
        var xSigDigits = Math.max(decimalPlaces(xMin+xAxisTickSpacing), decimalPlaces(xMin+2*xAxisTickSpacing)); //Math.round(0.1 / xAxisTickSpacing);
        if (xSigDigits === 0 && (xMax - xMin) < xAxisNumTicks) { xSigDigits += 1; }
        var dominantTick = 0;
        if (decimalPlaces(xMin) > decimalPlaces(xMin+xAxisTickSpacing)) {
          dominantTick = 1;
        }
        for (a = 0; a <= xAxisNumTicks; a++) {
            // grid line
            if (plot.drawGridlines) {
              if (xAxisNumTicks <= 10 || a % 2 == dominantTick) {
                if (a > 0 && a < xAxisNumTicks) {
                  var line = document.createElementNS(svgns, "line");
                  line.setAttribute('x1', (a * xAxisTickSpacing) / xRange * plotWidth);
                  line.setAttribute('y1', 0);
                  line.setAttribute('x2', (a * xAxisTickSpacing) / xRange * plotWidth);
                  line.setAttribute('y2', -plotHeight);
                  line.setAttribute('class', 'gridLine');
                  g.appendChild(line);
                }
              }
            }
            // tick mark
            var line = document.createElementNS(svgns, "line");
            line.setAttribute('x1', (a * xAxisTickSpacing) / xRange * plotWidth);
            line.setAttribute('y1', 0);
            line.setAttribute('x2', (a * xAxisTickSpacing) / xRange * plotWidth);
            if (xAxisNumTicks <= 10 || a % 2 == dominantTick) {
              line.setAttribute('y2', tickLen);
            } else {
              line.setAttribute('y2', minorTickLen);
            }
            line.setAttribute('class', 'tick');
            g.appendChild(line);

            // labels
            if (xAxisNumTicks <= 10 || a % 2 == dominantTick) {
                // tick label
                var label = document.createElementNS(svgns, "text");
                label.setAttribute('x', (a * xAxisTickSpacing) / xRange * plotWidth);
                label.setAttribute('y', tickLen + 5);
                label.setAttribute('text-anchor', 'middle');
                label.setAttribute('dominant-baseline', 'hanging');
                label.setAttribute('class', 'xTickLabel');
                label.innerHTML = `${(xMin + a * xAxisTickSpacing).toFixed(xSigDigits)}`;
                g.appendChild(label);
            }
        }

        // Y axis
        var yAxisTickSpacing = 0.0000001;
        var yAxisNumTicks = 1000;
        var yRange = yMax - yMin;
        a = 0;
        while (yAxisNumTicks > 20) {
          if (a % 2 == 0) {
            yAxisTickSpacing *= 5.0;
          } else {
            yAxisTickSpacing *= 2.0;
          }
          a++;
          yAxisNumTicks = Math.ceil(yRange / yAxisTickSpacing);
        }
        yMin = Math.floor(yMin / yAxisTickSpacing) * yAxisTickSpacing;
        yAxisNumTicks = Math.ceil((yMax - yMin) / yAxisTickSpacing);
        yRange = yAxisTickSpacing * yAxisNumTicks;
        var ySigDigits = Math.max(decimalPlaces(yMin+yAxisTickSpacing), decimalPlaces(yMin+2*yAxisTickSpacing));
        if (ySigDigits === 0 && (yMax - yMin) < yAxisNumTicks) { ySigDigits += 1; }
        dominantTick = 0;
        if (decimalPlaces(yMin) > decimalPlaces(yMin+yAxisTickSpacing)) {
          dominantTick = 1;
        }
        for (a = 0; a <= yAxisNumTicks; a++) {
            // grid line
            if (plot.drawGridlines) {
              if (yAxisNumTicks <= 10 || a % 2 == dominantTick) {
                if (a > 0 && a < yAxisNumTicks) {
                  var line = document.createElementNS(svgns, "line");
                  line.setAttribute('x1', 0); //(a * xAxisTickSpacing) / xRange * plotWidth);
                  line.setAttribute('y1', -(a * yAxisTickSpacing) / yRange * plotHeight);
                  line.setAttribute('x2', plotWidth); //(a * xAxisTickSpacing) / xRange * plotWidth);
                  line.setAttribute('y2', -(a * yAxisTickSpacing) / yRange * plotHeight); //-plotHeight);
                  line.setAttribute('class', 'gridLine');
                  g.appendChild(line);
                }
              }
            }
            // tick mark
            var line = document.createElementNS(svgns, "line");
            line.setAttribute('x1', 0);
            line.setAttribute('y1', -(a * yAxisTickSpacing) / yRange * plotHeight);
            if (yAxisNumTicks <= 6 || a % 2 == dominantTick) {
              line.setAttribute('x2', -tickLen);
            } else {
              line.setAttribute('x2', -minorTickLen);
            }
            line.setAttribute('y2', -(a * yAxisTickSpacing) / yRange * plotHeight);
            line.setAttribute('class', 'tick');
            g.appendChild(line);

            // labels
            if (yAxisNumTicks <= 6 || a % 2 == dominantTick) {
                // s += `<text transform="translate(${-tickLen - 5}, ${-(a * yAxisTickSpacing) / maxVal * plotHeight}), rotate(270)" x="0" y="0" text-anchor="middle" dominant-baseline="no-change" class="yTickLabel">${(a * yAxisTickSpacing).toFixed(ySigDigits)}</text>`;
                var label = document.createElementNS(svgns, "text");
                label.setAttribute('transform', `translate(${-tickLen - 5},${-(a * yAxisTickSpacing) / yRange * plotHeight}), rotate(270)`);
                label.setAttribute('x', 0);
                label.setAttribute('y', 0);
                label.setAttribute('text-anchor', 'middle');
                label.setAttribute('dominant-baseline', 'no-change');
                label.setAttribute('class', 'yTickLabel');
                label.innerHTML = `${(yMin + a * yAxisTickSpacing).toFixed(ySigDigits)}`;
                g.appendChild(label);
            }
        }

        // axis labels
        var xLabel = document.createElementNS(svgns, "text");
        xLabel.setAttribute('x', plotWidth / 2.0);
        xLabel.setAttribute('y', tickLen + 25.0);
        xLabel.setAttribute('text-anchor', 'middle');
        xLabel.setAttribute('dominant-baseline', 'hanging');
        xLabel.setAttribute('class', 'axisLabel');
        xLabel.innerHTML = plot.xAxisLabel;
        g.appendChild(xLabel);

        var yLabel = document.createElementNS(svgns, "text");
        yLabel.setAttribute('transform', `translate(${-tickLen - 28.0},${-plotHeight / 2.0}), rotate(270)`);
        yLabel.setAttribute('x', 0);
        yLabel.setAttribute('y', 0);
        yLabel.setAttribute('text-anchor', 'middle');
        yLabel.setAttribute('class', 'axisLabel');
        yLabel.innerHTML = plot.yAxisLabel;
        g.appendChild(yLabel);

        // text to show values when hover over
        var showValue = document.createElementNS(svgns, "text");
        showValue.setAttribute('x', 10);
        showValue.setAttribute('text-anchor', 'start');

        // draw the line(s)
        var g2 = document.createElementNS(svgns, "g");
        g2.setAttribute('id', 'lines');
        g.appendChild(g2);

        var radius = 3.0;
        if (totalNumPoints > 15) { radius = 2.5; }
        if (!plot.drawPoints) {
          radius = 1.0;
        }
        for (let s = 0; s < numSeries; s++) {
          var numPoints = Math.min(plot.dataX[s].length, plot.dataY[s].length);
          let seriesLine = document.createElementNS(svgns, "polyline");
          var pointsString = `${(plot.dataX[s][0] - xMin) / xRange * plotWidth},${-(plot.dataY[s][0] - yMin) / yRange * plotHeight}`;
          for (let a = 1; a < numPoints; a++) {
            pointsString += ` ${(plot.dataX[s][a] - xMin) / xRange * plotWidth},${-(plot.dataY[s][a] - yMin) / yRange * plotHeight}`
          }
          seriesLine.setAttribute('points', pointsString);
          var seriesLabel = "seriesLine";
          if (!plot.drawPoints) { seriesLabel = "seriesLineThick"; }
          seriesLine.setAttribute('class', `${seriesLabel}${s}`);
          seriesLine.addEventListener('mouseover', function() {
            var s2;
            for (s2 = 0; s2 < numSeries; s2++) {
              if (s2 != s) {
                var x = document.getElementsByClassName(`${seriesLabel}${s2}`);
                var i;
                for (i = 0; i < x.length; i++) {
                  x[i].style.opacity = deselectedOpacity;
                }
                x = document.getElementsByClassName(`dataPoint${s2}`);
                for (i = 0; i < x.length; i++) {
                    x[i].style.opacity = deselectedOpacity;
                }
              }
            }
          }, false);
          seriesLine.addEventListener('mouseout', function() {
            var s2;
            for (s2 = 0; s2 < numSeries; s2++) {
              if (s2 != s) {
                var x = document.getElementsByClassName(`${seriesLabel}${s2}`);
                var i;
                for (i = 0; i < x.length; i++) {
                  x[i].style.opacity = regularOpacity;
                }
                x = document.getElementsByClassName(`dataPoint${s2}`);
                for (i = 0; i < x.length; i++) {
                    x[i].style.opacity = regularOpacity;
                }
              }
            }
          }, false);
          g2.appendChild(seriesLine);

          // draw the data points
          for (let a = 0; a < numPoints; a++) {
            let c = document.createElementNS(svgns, "circle");
            c.setAttribute('cx', `${(plot.dataX[s][a] - xMin) / xRange * plotWidth}`);
            c.setAttribute('cy', `${-(plot.dataY[s][a] - yMin) / yRange * plotHeight}`);
            c.setAttribute('r', radius);
            c.setAttribute('class', `dataPoint${s}`);
            c.addEventListener('mouseover', function() {
              var s2;
              for (s2 = 0; s2 < numSeries; s2++) {
                if (s2 != s) {
                  var x = document.getElementsByClassName(`${seriesLabel}${s2}`);
                  var i;
                  for (i = 0; i < x.length; i++) {
                    x[i].style.opacity = deselectedOpacity;
                  }
                  x = document.getElementsByClassName(`dataPoint${s2}`);
                  for (i = 0; i < x.length; i++) {
                      x[i].style.opacity = deselectedOpacity;
                  }
                }
              }
              showValue.innerHTML = `x: ${(plot.dataX[s][a]).toFixed(xSigDigits+2)}, y: ${(plot.dataY[s][a]).toFixed(ySigDigits+2)}`;
            }, false);
            c.addEventListener('mouseout', function() {
              var s2;
              for (s2 = 0; s2 < numSeries; s2++) {
                if (s2 != s) {
                  var x = document.getElementsByClassName(`${seriesLabel}${s2}`);
                  var i;
                  for (i = 0; i < x.length; i++) {
                    x[i].style.opacity = regularOpacity;
                  }
                  x = document.getElementsByClassName(`dataPoint${s2}`);
                  for (i = 0; i < x.length; i++) {
                      x[i].style.opacity = regularOpacity;
                  }
                }
              }
              showValue.innerHTML = "";
            }, false);
            g2.appendChild(c);
          }
        }

        // Show value label
        showValue.setAttribute('id', 'showValue');
        showValue.setAttribute('y', -plotHeight + 20);
        g.appendChild(showValue);

        // plot border
        var plotBorder = document.createElementNS(svgns, "rect");
        plotBorder.setAttribute('x', 0);
        plotBorder.setAttribute('y', -plotHeight);
        plotBorder.setAttribute('width', plotWidth);
        plotBorder.setAttribute('height', plotHeight);
        plotBorder.id = "plotBorder";
        g.appendChild(plotBorder);

        // add a legend
        if (plot.seriesLabels.length > 0 && plot.drawLegend) {
          var legend = document.createElementNS(svgns, "g");
          legend.setAttribute('id', 'legend');
          g.appendChild(legend);
          for (let s = 0; s < numSeries; s++) {
            var y = -(plotHeight - 35 - 23 * (s+1));
            var line = document.createElementNS(svgns, "line");
            line.setAttribute('x1', plotWidth + 10);
            line.setAttribute('y1', y);
            line.setAttribute('x2', plotWidth + 40);
            line.setAttribute('y2', y);
            if (plot.drawPoints) {
              line.setAttribute('class', `seriesLine${s}`);
            } else {
              line.setAttribute('class', `seriesLineThick${s}`);
            }
            legend.appendChild(line);

            if (plot.drawPoints) {
              var c = document.createElementNS(svgns, "circle");
              c.setAttribute('cx', plotWidth+25);
              c.setAttribute('cy', y);
              c.setAttribute('r', radius);
              c.setAttribute('class', `dataPoint${s}`);
              legend.appendChild(c);
            }

            var legendLabel = document.createElementNS(svgns, "text");
            legendLabel.setAttribute('x', plotWidth + 48);
            legendLabel.setAttribute('y', y);
            legendLabel.setAttribute('text-anchor', 'left');
            // legendLabel.setAttribute('text-anchor', 'middle');
            legendLabel.setAttribute('dominant-baseline', 'middle');
            legendLabel.setAttribute('class', 'xTickLabel');
            legendLabel.innerHTML = plot.seriesLabels[s];
            legend.appendChild(legendLabel);
          }
        }

        // Add an invisible context menu to the parentId.
        var cm = document.createElement('div');
        cm.id = 'context-menu';
        cm.className = 'context-menu';
        var list = document.createElement('ul');

        var copyBtn = document.createElement("li");
        copyBtn.innerHTML = "Copy";
        copyBtn.addEventListener('click', function() {
          var content = `<svg xmlns='${svgns}' width='${plot.width}' height='${plot.height}'>\n${svg.innerHTML}\n</svg>`;
          // Create an auxiliary hidden input
          var aux = document.createElement("input");
          // Get the text from the element passed into the input
          aux.setAttribute("value", content);
          // Append the aux input to the body
          document.body.appendChild(aux);
          // Highlight the content
          aux.select();
          // Execute the copy command
          document.execCommand("copy");
          // Remove the input from the body
          document.body.removeChild(aux);
          // Give a notification
          alert("The plot's SVG content has been copied to the clipboard.");
        }, false);
        list.appendChild(copyBtn);

        var gridlineBtn = document.createElement("li");
        var verb = plot.drawGridlines ? "Hide " : "Show ";
        gridlineBtn.innerHTML = verb + "Gridlines";
        gridlineBtn.addEventListener('click', function() {
          plot.drawGridlines = !plot.drawGridlines;
          // update the context menu label
          var verb = plot.drawGridlines ? "Hide " : "Show ";
          gridlineBtn.innerHTML = verb + "Gridlines";
          update(svg);
        }, false);
        list.appendChild(gridlineBtn);

        if (plot.seriesLabels.length > 0) {
          var legendBtn = document.createElement("li");
          var verb = plot.drawLegend ? "Hide " : "Show ";
          legendBtn.innerHTML = verb + "Legend";
          legendBtn.addEventListener('click', function() {
            plot.drawLegend = !plot.drawLegend;
            // update the context menu label
            var verb = plot.drawLegend ? "Hide " : "Show ";
            legendBtn.innerHTML = verb + "Legend";
            update(svg);
          }, false);
          list.appendChild(legendBtn);
        }

        var pointsBtn = document.createElement("li");
        var verb = plot.drawPoints ? "Hide " : "Show ";
        pointsBtn.innerHTML = verb + "Points";
        pointsBtn.addEventListener('click', function() {
          plot.drawPoints = !plot.drawPoints;
          // update the context menu label
          var verb = plot.drawPoints ? "Hide " : "Show ";
          pointsBtn.innerHTML = verb + "Points";
          update(svg);
        }, false);
        list.appendChild(pointsBtn);

        var backgroundColorBtn = document.createElement("li");
        var verb = plot.drawGreyBackground ? "Light " : "Dark ";
        backgroundColorBtn.innerHTML = verb + "Background";
        backgroundColorBtn.addEventListener('click', function() {
          plot.drawGreyBackground = !plot.drawGreyBackground;
          // update the context menu label
          var verb = plot.drawGreyBackground ? "Light " : "Dark ";
          backgroundColorBtn.innerHTML = verb + "Background";
          update(svg);
        }, false);
        list.appendChild(backgroundColorBtn);

        cm.appendChild(list);
        document.getElementById(plot.parentId).appendChild(cm);

        var menu = document.getElementById('context-menu');
        document.onclick = function () {
            menu.style.display = 'none';
        };

        document.getElementById('plotSvg').oncontextmenu = function (evt) {
            evt = (evt) ? evt : ((event) ? event : null);
            var posnX = (evt.pageX) ? evt.pageX : ((evt.offsetX) ? evt.offsetX + 10 : null);
            var posnY = (evt.pageY) ? evt.pageY : ((evt.offsetY) ? evt.offsetY + 10 : null);
            menu.style.left = posnX + 'px';
            menu.style.top = posnY + 'px';
            menu.style.display = 'block';
            if (typeof evt.preventDefault != "undefined") {
                evt.preventDefault();
            } else {
                evt.returnValue = false;
            }
        };
      }

      function decimalPlaces(num) {
        var match = (''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
        if (!match) { return 0; }
        return Math.max(
             0,
             // Number of digits right of decimal point.
             (match[1] ? match[1].length : 0)
             // Adjust for scientific notation.
             - (match[2] ? +match[2] : 0));
      }

      update(null);
    </script></div></body>